{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="{% static 'favicon.svg' %}" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swim Data Analyser</title>
    <link rel="stylesheet" href="/static/css/styles.css">
  </head>
  <body>
    <!-- Top bar -->
    <header class="top-bar">
      <a href="/" class="top-bar-link">Home</a>
      <a href="/about.html" class="top-bar-link">About</a>
      <a href="https://github.com/PeterK-end/swim-data-analyser" target="_blank">
        <img src="/static/graphics/git-logo.svg" class="logo">
      </a>
    </header>

    <div id="main-content">

      <!-- Project Description -->
      <h1>Swim Data Analyser</h1>
      <p>Here you can find some tools to edit and analyse workout data
	produced by Smartwatches as the Garmin series. None of your data
	will be stored on the server. Before uploading your workout you
	can test all features on the demo file provided.</p>

      <!-- File upload section -->
      <div class="upload-container">
	<label for="fileUpload">Upload your FIT file:</label>
	<form id="uploadForm" enctype="multipart/form-data">
	  <input type="file" id="fileInput" name="file">
          <button type="submit">Upload</button>
	</form>
      </div>

      <!-- Icon Selection for Edit and Analyse views -->
      <div class="view-selector">
	<div class="view-option" id="editView">
	  <img src="/static/graphics/edit-icon.svg" alt="Edit View" class="view-icon">
	  <p>Edit</p>
	</div>
	<div class="view-option" id="analyseView">
	  <img src="/static/graphics/analyse-icon.svg" alt="Analyse View" class="view-icon">
	  <p>Analyse</p>
	</div>
      </div>
      <!-- Content below to change based on view -->
      <div id="viewContent">
	<!-- Default content for edit view -->
	<div id="editContent">
	  <h2>Visual Editor</h2>
          <div class="metadata-container", id="metadata-container"></div>
	  <div class="plot-object-container" id="editPlot">
            <div class="button-container">
              <!-- Buttons with icons and text -->
              <!-- <button id="poolSizeBtn" class="icon-btn"></button> -->
              <button title="Split" id="splitBtn" class="icon-btn">
                <!-- split icon by Free Icons (https://free-icons.github.io/free-icons/) -->
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                  <path
                    d="M 401.08317214700196 39.11798839458414 Q 411.9767891682785 29.214700193423596 422.8704061895551 39.11798839458414 L 502.09671179883946 118.34429400386847 L 502.09671179883946 118.34429400386847 Q 512 129.23791102514508 502.09671179883946 140.13152804642166 L 422.8704061895551 219.357833655706 L 422.8704061895551 219.357833655706 Q 411.9767891682785 229.26112185686654 401.08317214700196 219.357833655706 Q 391.17988394584137 208.4642166344294 401.08317214700196 197.5705996131528 L 452.58027079303673 145.08317214700193 L 452.58027079303673 145.08317214700193 L 396.13152804642164 145.08317214700193 L 336.7117988394584 145.08317214700193 Q 323.8375241779497 145.08317214700193 313.9342359767892 153.99613152804642 L 212.92069632495165 256 L 212.92069632495165 256 L 313.9342359767892 358.0038684719536 L 313.9342359767892 358.0038684719536 Q 323.8375241779497 366.91682785299804 336.7117988394584 366.91682785299804 L 396.13152804642164 366.91682785299804 L 452.58027079303673 366.91682785299804 L 401.08317214700196 314.4294003868472 L 401.08317214700196 314.4294003868472 Q 391.17988394584137 303.5357833655706 401.08317214700196 292.642166344294 Q 411.9767891682785 282.7388781431335 422.8704061895551 292.642166344294 L 502.09671179883946 371.86847195357836 L 502.09671179883946 371.86847195357836 Q 512 382.7620889748549 502.09671179883946 393.65570599613153 L 422.8704061895551 472.88201160541587 L 422.8704061895551 472.88201160541587 Q 411.9767891682785 482.7852998065764 401.08317214700196 472.88201160541587 Q 391.17988394584137 461.98839458413926 401.08317214700196 451.09477756286265 L 452.58027079303673 398.6073500967118 L 452.58027079303673 398.6073500967118 L 396.13152804642164 398.6073500967118 L 336.7117988394584 398.6073500967118 Q 310.963249516441 398.6073500967118 292.14700193423596 379.79110251450675 L 188.16247582205028 276.79690522243715 L 188.16247582205028 276.79690522243715 Q 183.21083172147002 271.8452611218569 177.2688588007737 271.8452611218569 L 47.5357833655706 271.8452611218569 L 15.845261121856867 271.8452611218569 Q 0.9903288201160542 270.8549323017408 0 256 Q 0.9903288201160542 241.1450676982592 15.845261121856867 240.15473887814312 L 47.5357833655706 240.15473887814312 L 177.2688588007737 240.15473887814312 Q 183.21083172147002 240.15473887814312 188.16247582205028 235.20309477756285 L 292.14700193423596 132.20889748549322 L 292.14700193423596 132.20889748549322 Q 310.963249516441 113.3926499032882 336.7117988394584 113.3926499032882 L 396.13152804642164 113.3926499032882 L 452.58027079303673 113.3926499032882 L 401.08317214700196 60.90522243713733 L 401.08317214700196 60.90522243713733 Q 391.17988394584137 50.011605415860735 401.08317214700196 39.11798839458414 L 401.08317214700196 39.11798839458414 Z"
                    />
                </svg>
              </button>
              <button title="Merge" Id="mergeBtn" class="icon-btn">
                <!-- merge icon by Free Icons (https://free-icons.github.io/free-icons/) -->
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                  <path
                    d="M 0 81.70212765957447 Q 0.9903288201160542 66.84719535783366 15.845261121856867 65.85686653771761 L 95.0715667311412 65.85686653771761 L 142.6073500967118 65.85686653771761 Q 166.3752417794971 66.84719535783366 181.23017408123792 85.66344294003868 L 288.18568665377177 233.22243713733076 L 288.18568665377177 233.22243713733076 Q 293.13733075435204 240.15473887814312 301.0599613152805 240.15473887814312 L 452.58027079303673 240.15473887814312 L 452.58027079303673 240.15473887814312 L 401.08317214700196 187.66731141199227 L 401.08317214700196 187.66731141199227 Q 391.17988394584137 176.77369439071566 401.08317214700196 165.88007736943908 Q 411.9767891682785 155.97678916827854 422.8704061895551 165.88007736943908 L 502.09671179883946 245.10638297872342 L 502.09671179883946 245.10638297872342 Q 512 256 502.09671179883946 266.8936170212766 L 422.8704061895551 346.11992263056095 L 422.8704061895551 346.11992263056095 Q 411.9767891682785 356.0232108317215 401.08317214700196 346.11992263056095 Q 391.17988394584137 335.22630560928434 401.08317214700196 324.3326885880077 L 452.58027079303673 271.8452611218569 L 452.58027079303673 271.8452611218569 L 301.0599613152805 271.8452611218569 L 301.0599613152805 271.8452611218569 Q 293.13733075435204 271.8452611218569 288.18568665377177 278.77756286266924 L 181.23017408123792 426.3365570599613 L 181.23017408123792 426.3365570599613 Q 166.3752417794971 445.15280464216636 142.6073500967118 446.1431334622824 L 95.0715667311412 446.1431334622824 L 15.845261121856867 446.1431334622824 Q 0.9903288201160542 445.15280464216636 0 430.29787234042556 Q 0.9903288201160542 415.4429400386847 15.845261121856867 414.4526112185687 L 95.0715667311412 414.4526112185687 L 142.6073500967118 414.4526112185687 Q 150.52998065764024 414.4526112185687 155.4816247582205 407.5203094777563 L 263.42746615087043 259.9613152804642 L 263.42746615087043 259.9613152804642 Q 263.42746615087043 258.9709864603482 264.41779497098645 257.9806576402321 Q 265.4081237911025 256.9903288201161 266.39845261121854 256 Q 264.41779497098645 254.0193423597679 263.42746615087043 252.03868471953578 L 155.4816247582205 104.47969052224371 L 155.4816247582205 104.47969052224371 Q 150.52998065764024 97.54738878143134 142.6073500967118 97.54738878143134 L 95.0715667311412 97.54738878143134 L 15.845261121856867 97.54738878143134 Q 0.9903288201160542 96.55705996131528 0 81.70212765957447 L 0 81.70212765957447 Z"
                    />
                </svg>
              </button>
              <button title="Delete" id="deleteBtn" class="icon-btn">
                <!-- trash-xmark icon by Free Icons (https://free-icons.github.io/free-icons/) -->
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                  <path d="M 196 40 L 181 64 L 196 40 L 181 64 L 331 64 L 331 64 L 316 40 L 316 40 Q 311 32 302 32 L 210 32 L 210 32 Q 201 32 196 40 L 196 40 Z M 343 23 L 369 64 L 343 23 L 369 64 L 416 64 L 464 64 Q 479 65 480 80 Q 479 95 464 96 L 446 96 L 446 96 L 420 453 L 420 453 Q 418 478 400 495 Q 382 511 356 512 L 156 512 L 156 512 Q 130 511 112 495 Q 94 478 92 453 L 66 96 L 66 96 L 48 96 L 48 96 Q 33 95 32 80 Q 33 65 48 64 L 64 64 L 143 64 L 169 23 L 169 23 Q 184 1 210 0 L 302 0 L 302 0 Q 328 1 343 23 L 343 23 Z M 98 96 L 124 450 L 98 96 L 124 450 Q 125 463 134 471 Q 143 480 156 480 L 356 480 L 356 480 Q 369 480 378 471 Q 387 463 388 450 L 414 96 L 414 96 L 98 96 L 98 96 Z M 181 213 Q 192 203 203 213 L 256 265 L 256 265 L 309 213 L 309 213 Q 320 203 331 213 Q 341 224 331 235 L 279 288 L 279 288 L 331 341 L 331 341 Q 341 352 331 363 Q 320 373 309 363 L 256 311 L 256 311 L 203 363 L 203 363 Q 192 373 181 363 Q 171 352 181 341 L 233 288 L 233 288 L 181 235 L 181 235 Q 171 224 181 213 L 181 213 Z" />
                </svg>
              </button>
              <button title="Change Stroke" id="changeStrokeBtn" class="icon-btn">
                <!-- person-swimming icon by Free Icons (https://free-icons.github.io/free-icons/) -->
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                  <path
                    d="M 92.44444444444444 142.22222222222223 Q 112.88888888888889 143.11111111111111 123.55555555555556 160 Q 132.44444444444446 177.77777777777777 123.55555555555556 195.55555555555554 Q 112.88888888888889 212.44444444444446 92.44444444444444 213.33333333333334 Q 72 212.44444444444446 61.333333333333336 195.55555555555554 Q 52.44444444444444 177.77777777777777 61.333333333333336 160 Q 72 143.11111111111111 92.44444444444444 142.22222222222223 L 92.44444444444444 142.22222222222223 Z M 92.44444444444444 241.77777777777777 Q 128.88888888888889 240.88888888888889 147.55555555555554 209.77777777777777 Q 165.33333333333334 177.77777777777777 147.55555555555554 145.77777777777777 Q 128.88888888888889 114.66666666666667 92.44444444444444 113.77777777777777 Q 56 114.66666666666667 37.333333333333336 145.77777777777777 Q 19.555555555555557 177.77777777777777 37.333333333333336 209.77777777777777 Q 56 240.88888888888889 92.44444444444444 241.77777777777777 L 92.44444444444444 241.77777777777777 Z M 119.11111111111111 351.1111111111111 Q 106.66666666666667 342.22222222222223 96 331.55555555555554 Q 85.33333333333333 322.6666666666667 74.66666666666667 331.55555555555554 Q 64.88888888888889 342.22222222222223 51.55555555555556 351.1111111111111 Q 34.666666666666664 363.55555555555554 12.444444444444445 368.8888888888889 Q 0.8888888888888888 371.55555555555554 0 382.22222222222223 Q 1.7777777777777777 397.3333333333333 16 396.44444444444446 Q 47.111111111111114 389.3333333333333 67.55555555555556 374.22222222222223 Q 78.22222222222223 367.1111111111111 85.33333333333333 360.8888888888889 Q 92.44444444444444 367.1111111111111 103.11111111111111 374.22222222222223 Q 115.55555555555556 383.1111111111111 133.33333333333334 390.22222222222223 Q 150.22222222222223 398.22222222222223 170.66666666666666 398.22222222222223 Q 191.11111111111111 398.22222222222223 208 390.22222222222223 Q 225.77777777777777 383.1111111111111 238.22222222222223 374.22222222222223 Q 248.88888888888889 367.1111111111111 256 360.8888888888889 Q 263.1111111111111 367.1111111111111 273.77777777777777 374.22222222222223 Q 286.22222222222223 383.1111111111111 304 390.22222222222223 Q 320.8888888888889 398.22222222222223 341.3333333333333 398.22222222222223 Q 361.77777777777777 398.22222222222223 378.6666666666667 390.22222222222223 Q 396.44444444444446 383.1111111111111 408.8888888888889 374.22222222222223 Q 419.55555555555554 367.1111111111111 426.6666666666667 360.8888888888889 Q 433.77777777777777 367.1111111111111 444.44444444444446 374.22222222222223 Q 464.8888888888889 389.3333333333333 496 396.44444444444446 Q 510.22222222222223 397.3333333333333 512 382.22222222222223 Q 511.1111111111111 371.55555555555554 499.55555555555554 368.8888888888889 Q 477.3333333333333 363.55555555555554 460.44444444444446 351.1111111111111 Q 447.1111111111111 342.22222222222223 437.3333333333333 331.55555555555554 Q 426.6666666666667 322.6666666666667 416 331.55555555555554 Q 406.22222222222223 342.22222222222223 392.8888888888889 351.1111111111111 Q 369.77777777777777 368 341.3333333333333 369.77777777777777 Q 312.8888888888889 368 289.77777777777777 351.1111111111111 Q 276.44444444444446 342.22222222222223 266.6666666666667 331.55555555555554 Q 256 322.6666666666667 245.33333333333334 331.55555555555554 Q 235.55555555555554 342.22222222222223 222.22222222222223 351.1111111111111 Q 199.11111111111111 368 170.66666666666666 369.77777777777777 Q 142.22222222222223 368 119.11111111111111 351.1111111111111 L 119.11111111111111 351.1111111111111 Z M 229.33333333333334 192.88888888888889 L 366.22222222222223 309.3333333333333 L 229.33333333333334 192.88888888888889 L 366.22222222222223 309.3333333333333 Q 381.3333333333333 304 393.77777777777777 295.1111111111111 L 393.77777777777777 295.1111111111111 L 393.77777777777777 295.1111111111111 L 248.88888888888889 172.44444444444446 L 248.88888888888889 172.44444444444446 Q 288.8888888888889 143.11111111111111 341.3333333333333 142.22222222222223 L 412.44444444444446 142.22222222222223 L 412.44444444444446 142.22222222222223 Q 425.77777777777777 141.33333333333334 426.6666666666667 128 Q 425.77777777777777 114.66666666666667 412.44444444444446 113.77777777777777 L 341.3333333333333 113.77777777777777 L 341.3333333333333 113.77777777777777 Q 263.1111111111111 115.55555555555556 210.66666666666666 168 Q 158.22222222222223 220.44444444444446 156.44444444444446 298.6666666666667 L 156.44444444444446 312 L 156.44444444444446 312 Q 163.55555555555554 312.8888888888889 170.66666666666666 313.77777777777777 Q 177.77777777777777 313.77777777777777 184.88888888888889 312 L 184.88888888888889 298.6666666666667 L 184.88888888888889 298.6666666666667 Q 186.66666666666666 234.66666666666666 227.55555555555554 191.11111111111111 L 229.33333333333334 192.88888888888889 L 229.33333333333334 192.88888888888889 Z"
                    />
                </svg>
              </button>
              <button title="Undo All" id="undoBtn" class="icon-btn">
                <!-- arrow-rotate-left icon by Free Icons (https://free-icons.github.io/free-icons/) -->
                <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                  <path
                    d="M 18.285714285714285 182.85714285714286 Q 1.1428571428571428 181.71428571428572 0 164.57142857142858 L 0 18.285714285714285 L 0 18.285714285714285 Q 1.1428571428571428 1.1428571428571428 18.285714285714285 0 Q 35.42857142857143 1.1428571428571428 36.57142857142857 18.285714285714285 L 36.57142857142857 124.57142857142857 L 36.57142857142857 124.57142857142857 Q 70.85714285714286 67.42857142857143 128 34.285714285714285 Q 185.14285714285714 1.1428571428571428 256 0 Q 328 1.1428571428571428 385.14285714285717 35.42857142857143 Q 443.42857142857144 68.57142857142857 476.57142857142856 126.85714285714286 Q 510.85714285714283 184 512 256 Q 510.85714285714283 328 476.57142857142856 385.14285714285717 Q 443.42857142857144 443.42857142857144 385.14285714285717 476.57142857142856 Q 328 510.85714285714283 256 512 Q 186.28571428571428 510.85714285714283 130.28571428571428 478.85714285714283 Q 74.28571428571429 446.85714285714283 38.857142857142854 392 Q 34.285714285714285 382.85714285714283 38.857142857142854 374.85714285714283 Q 43.42857142857143 365.7142857142857 54.857142857142854 365.7142857142857 Q 65.14285714285714 365.7142857142857 72 374.85714285714283 Q 101.71428571428571 420.57142857142856 149.71428571428572 448 Q 197.71428571428572 474.2857142857143 256 475.42857142857144 Q 349.7142857142857 473.14285714285717 411.42857142857144 411.42857142857144 Q 473.14285714285717 349.7142857142857 475.42857142857144 256 Q 473.14285714285717 162.28571428571428 411.42857142857144 100.57142857142857 Q 349.7142857142857 38.857142857142854 256 36.57142857142857 Q 194.28571428571428 37.714285714285715 145.14285714285714 66.28571428571429 Q 94.85714285714286 96 66.28571428571429 146.28571428571428 L 164.57142857142858 146.28571428571428 L 164.57142857142858 146.28571428571428 Q 181.71428571428572 147.42857142857142 182.85714285714286 164.57142857142858 Q 181.71428571428572 181.71428571428572 164.57142857142858 182.85714285714286 L 18.285714285714285 182.85714285714286 L 18.285714285714285 182.85714285714286 Z"
                    />
                </svg>
              </button>

              <!-- Modal Structure -->
              <div id="strokeModal" class="modal" style="display: none;">
                <div class="modal-content">
                  <h4>Select Swim Stroke</h4>
                  <select id="strokeSelect">
                    <option value="freestyle">Freestyle</option>
                    <option value="breaststroke">Breaststroke</option>
                    <option value="backstroke">Backstroke</option>
                    <option value="butterfly">Butterfly</option>
                  </select>
                </div>
                <div class="modal-footer">
                  <button id="confirmStroke" class="btn">Confirm</button>
                  <button id="cancelStroke" class="btn">Cancel</button>
                </div>
              </div>
            </div>
	    <div id="editDataPlot"></div>
          </div>
          <p>Select the bars on which one of the editing actions should be performed.</p>
	</div>

	<!-- Hidden by default (Analyse content) -->
	<div id="analyseContent" style="display: none;">

          <h2>Workout Summary per Stroke</h2>

          <p>Stroke rate per minute, strokes per length, and
            consequently, the pace likely varies across the different
            strokes. Additionally, the stroke rate (SPM) might have a
            different impact on the pace for the various swimming
            strokes.</p>

          <div class="summary-container">
            <div id="summaryData"></div>
          </div>

          <h2>Heartrate across workout</h2>

          <p>Which parts of your workout were especially challenging?
          For more information, you can hover over the x-axis.</p>

          <div class="plot-object-container">
            <div id="heartratePlot"></div>
          </div>

          <h2>Stroke efficency</h2>

          <p>Increased stroke rate leads to a certain degree of
            increased speed in the water. Additionally, improving
            swimming technique to perform more efficient strokes will
            also increase speed and potentially decrease the strokes
            needed to cover a length (SPL). The plot demonstrates how
            strokes per length and stroke rate (strokes per minute)
            correspond to the pace accomplished within a lane. Looking
            at data, you should observe that fastest lengths are those
            with high stroke rate and/or low stroke count values. The
            axis for the pace is reversed to visually account for the
            fact that higher values in SPM and SPL should lead to
            faster pace (lower values).</p>

          <div class="plot-object-container">
            <div id="pacePlot"></div>
          </div>

          <h2>Stroke Analysis</h2>

          <p> Good swimmers are able to maintain a constant stroke
            count at a high stroke rate. Unfortunately, for most of us,
            increasing the stroke rate often leads to an increase in
            stroke count. This indicates that more strokes are needed
            per lane, resulting in a less effective stroke and wasted
            energy.</p>

          <select id="strokeFilter">
            <option value="breaststroke">Breaststroke</option>
            <option value="backstroke">Backstroke</option>
            <option value="freestyle">Freestyle</option>
            <option value="butterfly">Butterfly</option>
          </select>

          <div class="plot-object-container">
            <div id="strokeRateStrokeCountPlot"></div>
          </div>

          <h2>Intervals</h2>

          <p> Intervalls are clocked automatically on rest or can be
            triggered by the user.</p>

          <div class="summary-container">
            <div id="intervalSummaryTable"></div>
          </div>

        </div>
      </div>

      <script src="/static/js/dist/main.js"></script>

    </div> <!-- End of main-content -->
  </body>
  <footer><p><small>The content for this site is <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA</a> licensed. Check the <a href="https://github.com/PeterK-end/swim-data-analyser">source code</a>.</small></p></footer>
</html>
